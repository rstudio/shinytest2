<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="shinytest2">
<title>Using shinytest2 with continuous integration • shinytest2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.1/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.1/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using shinytest2 with continuous integration">
<meta property="og:description" content="shinytest2">
<meta property="og:image" content="https://rstudio.github.io/shinytest2/logo.svg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">shinytest2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/shinytest2.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/in-depth.html">Testing in depth</a>
    <a class="dropdown-item" href="../articles/robust.html">Robust testing</a>
    <a class="dropdown-item" href="../articles/use-ci.html">Using shinytest2 with continuous integration</a>
    <a class="dropdown-item" href="../articles/use-package.html">Using shinytest2 with R packages</a>
    <a class="dropdown-item" href="../articles/using-monkey-testing.html">Monkey testing</a>
    <a class="dropdown-item" href="../articles/z-migration.html">Migrating from shinytest</a>
    <a class="dropdown-item" href="../articles/zzz-faq.html">Frequently Asked Questions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/shinytest2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">



<script src="use-ci_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Using shinytest2 with continuous integration</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/shinytest2/blob/HEAD/vignettes/use-ci.Rmd" class="external-link"><code>vignettes/use-ci.Rmd</code></a></small>
      <div class="d-none name"><code>use-ci.Rmd</code></div>
    </div>

    
    
<p><a href="https://github.com/rstudio/shinytest2" class="external-link">shinytest2</a> can be used not only when developing applications locally – it can also be used with continuous integration (CI) platforms, such as <a href="https://docs.github.com/en/actions" class="external-link">GitHub Actions</a>.</p>
<p>The rest of this document explains how to use <a href="https://github.com/rstudio/shinytest2" class="external-link">shinytest2</a> with GitHub in two use cases: with applications that stand alone (are not part of an R package), and with an application that are part of an R package.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The overall procedure for enabling tests on a CI platform is this:</p>
<ul>
<li>First create tests locally (on your development machine) and save the expected results.</li>
<li>Commit the expected results into the project’s git repository and push to GitHub.</li>
<li>Create a GitHub Actions workflow file to run tests on GitHub Actions (GHA).</li>
</ul>
<p>Once you have set up continuous integration, the typical development cycle is this:</p>
<ul>
<li>Modify your project, commit, and push the changes.</li>
<li>The CI platform will automatically do an <em>action</em>, in which it downloads the code and runs tests. If the tests fail, it will send you an email alert.</li>
</ul>
<p>As you develop your application, it may also be appropriate to add, remove, or modify tests, or re-run tests and save new expected results.</p>
</div>
<div class="section level2">
<h2 id="a-repository-with-a-single-application">A repository with a single application<a class="anchor" aria-label="anchor" href="#a-repository-with-a-single-application"></a>
</h2>
<p>For Shiny applications that aren’t part of an R package, there are two common ways that the repository will be set up:</p>
<ol style="list-style-type: decimal">
<li>The repository contains one application, and the application files (like <code>app.R</code> and <code>global.R</code>) are contained at the top level of the repository.</li>
<li>The repository contains more than one application files, and each application is contained in a subdirectory.</li>
</ol>
<p>This section explains how to set up GHA to test a repository with a single application. <!-- See https://github.com/rstudio/shinytest-ci-example for an example. --></p>
<p>The directory structure of such a project will look something like this:</p>
<pre><code>/
├── .github
│   └── workflows
│       └── check-app.yaml
├── .Rprofile
├── README.md
├── app.R
├── renv/activate.R
├── renv.lock
└── tests
    ├── testthat.R
    └── testthat
        ├── _snaps
        │   └── shinytest2
        │       ├── 001.json
        │       ├── 002.png
        │       ├── 003.json
        │       └── 004.png
        └── test-shinytest2.R</code></pre>
<p>The files that you will need to add are described below.</p>
<div class="section level3">
<h3 id="check-app-yaml">
<code>check-app.yaml</code><a class="anchor" aria-label="anchor" href="#check-app-yaml"></a>
</h3>
<p>This file contains information for GitHub Actions to build and test your application. It should look similar to this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Workflow derived from https://github.com/r-lib/actions/blob/v2-branch/examples/check-standard.yaml</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># Need help debugging build failures? Start at https://github.com/r-lib/actions#where-to-find-help</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> master</span><span class="kw">]</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> master</span><span class="kw">]</span></span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> test-app</span></span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="at">  </span><span class="fu">test-app</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ${{ matrix.config.os }}</span></span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> ${{ matrix.config.os }} (${{ matrix.config.r }})</span></span>
<span id="cb2-16"><a href="#cb2-16"></a></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="at">    </span><span class="fu">strategy</span><span class="kw">:</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="at">      </span><span class="fu">fail-fast</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="at">      </span><span class="fu">matrix</span><span class="kw">:</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="at">        </span><span class="fu">config</span><span class="kw">:</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="at">          </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="fu">os</span><span class="kw">:</span><span class="at"> ubuntu-20.04</span><span class="kw">,</span><span class="at"> </span><span class="fu">r</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.1'</span><span class="kw">}</span></span>
<span id="cb2-22"><a href="#cb2-22"></a></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="at">    </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="at">      </span><span class="fu">GITHUB_PAT</span><span class="kw">:</span><span class="at"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="at">      </span><span class="fu">R_KEEP_PKG_SOURCE</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-pandoc@v2</span></span>
<span id="cb2-31"><a href="#cb2-31"></a></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="at">          </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> ${{ matrix.config.r }}</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="at">          </span><span class="fu">http-user-agent</span><span class="kw">:</span><span class="at"> ${{ matrix.config.http-user-agent }}</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="at">          </span><span class="fu">use-public-rspm</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-37"><a href="#cb2-37"></a></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-renv@v2</span></span>
<span id="cb2-39"><a href="#cb2-39"></a></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> rstudio/shinytest2/actions/test_app@v1</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb2-42"><a href="#cb2-42"></a><span class="at">          </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"."</span></span></code></pre></div>
<p>You should change the <code>os</code> and <code>r</code> version (set to <code>ubuntu-20.04</code> and <code>4.1</code> above) to whatever operating system and R version is being used on the platform that your application will be deployed to.</p>
</div>
<div class="section level3">
<h3 id="renv-lock-renvactivate-r--rprofile">
<code>renv.lock</code>, <code>renv/activate.R</code>, <code>.Rprofile</code><a class="anchor" aria-label="anchor" href="#renv-lock-renvactivate-r--rprofile"></a>
</h3>
<p><a href="https://rstudio.github.io/renv/" class="external-link">renv</a> project-local dependency management system for projects. This is useful for Shiny applications where using specific package versions for all of your Shiny app dependencies. <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> uses the same mechanism that is used by shinyapps.io and RStudio Connect.</p>
<p><a href="https://rstudio.github.io/renv/" class="external-link">renv</a> auto-generates these three files using is<code>renv::init()</code> and <code>renv::snapshot()</code>.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th align="left">File</th>
<th align="left">Usage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>.Rprofile</code></td>
<td align="left">Used to activate <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> for new R sessions launched in the project.</td>
</tr>
<tr class="even">
<td align="left"><code>renv.lock</code></td>
<td align="left">The lockfile, describing the state of your project’s library at some point in time.</td>
</tr>
<tr class="odd">
<td align="left"><code>renv/activate.R</code></td>
<td align="left">The activation script run by the project <code>.Rprofile</code>.</td>
</tr>
</tbody>
</table>
<p>To create <code>.Rprofile</code> and <code>renv/activate.R</code>, call <code>renv::init()</code> within your App project. To create / update <code>renv.lock</code>, call <code>renv::snapshot()</code>.</p>
<p><strong>Whenever you update packages on your development machine, you should run <code>renv::snapshot()</code> command again to make sure the packages used on GitHub stay in sync.</strong></p>
<p>To learn more about <a href="https://rstudio.github.io/renv/" class="external-link">renv</a>, please see their <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link">Introduction to renv</a> and <a href="https://rstudio.github.io/renv/articles/collaborating.html" class="external-link">Collaborating with renv</a> articles.</p>
<p>An alternative to using <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> is to create a <code>DESCRIPTION</code> file. This will not lock package versions; instead, it will use the latest version of each package from CRAN.</p>
</div>
<div class="section level3">
<h3 id="running-the-first-build">Running the first build<a class="anchor" aria-label="anchor" href="#running-the-first-build"></a>
</h3>
<p>Once you’ve added these files, commit them and push to GitHub. This will trigger a build on GitHub Actions (GHA).</p>
<p>The first successful run of your workflow on GHA will generally take much longer than subsequent runs, because it needs to install all the R packages the first time. After a successful run, the packages are cached, so the builds should be much faster.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-repository-with-multiple-applications">A repository with multiple applications<a class="anchor" aria-label="anchor" href="#a-repository-with-multiple-applications"></a>
</h2>
<p>Another way to run your tests is using a repository with multiple applications, each in its own subdirectory. <!-- See https://github.com/rstudio/shinytest-ci-example-multi for an example. --></p>
<p>The directory structure would look something like this:</p>
<pre><code>/
├── .github
│   └── workflows
│       └── check-app.yaml
├── .Rprofile
├── README.md
├── renv/activate.R
├── renv.lock
├── 01_hello
│   ├── app.R
│   └── tests
│       ├── testthat.R
│       └── testthat
│           ├── _snaps
│           │   └── shinytest2
│           │       ├── 001.json
│           │       ├── 002.png
│           │       ├── 003.json
│           │       └── 004.png
│           └── test-shinytest2.R
└── 06_tabsets
    ├── app.R
    └── tests
        ├── testthat.R
        └── testthat
            ├── _snaps
            │   └── shinytest2
            │       ├── 001.json
            │       ├── 002.png
            │       ├── 003.json
            │       ├── 004.png
            │       ├── 005.json
            │       └── 006.png
            └── test-shinytest2.R</code></pre>
<p>For a repository with this structure, the configuration is largely the same as a repository with a single app, as described above. The only difference is in the <code>check-app.yaml</code> file.</p>
<div class="section level3">
<h3 id="check-app-yaml-1">
<code>check-app.yaml</code><a class="anchor" aria-label="anchor" href="#check-app-yaml-1"></a>
</h3>
<p>The <code>check-app.yaml</code> should have a step for each application in the respective directory, instead of testing just one application in the current directory.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">      <span class="op">-</span> <span class="va">uses</span><span class="op">:</span> <span class="va">rstudio</span><span class="op">/</span><span class="va">shinytest2</span><span class="op">/</span><span class="va">check_app</span><span class="op">@</span><span class="va">v2</span>
        <span class="va">with</span><span class="op">:</span>
          <span class="va">path</span><span class="op">:</span> <span class="st">"01_hello"</span>
      <span class="op">-</span> <span class="va">uses</span><span class="op">:</span> <span class="va">rstudio</span><span class="op">/</span><span class="va">shinytest2</span><span class="op">/</span><span class="va">check_app</span><span class="op">@</span><span class="va">v2</span>
        <span class="va">with</span><span class="op">:</span>
          <span class="va">path</span><span class="op">:</span> <span class="st">"06_tabsets"</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="testing-applications-in-a-package">Testing applications in a package<a class="anchor" aria-label="anchor" href="#testing-applications-in-a-package"></a>
</h2>
<p>See the <a href="./use-package.html">Using shinytest2 with R packages</a> article.</p>
</div>
<div class="section level2">
<h2 id="frequently-asked-questions">Frequently asked questions<a class="anchor" aria-label="anchor" href="#frequently-asked-questions"></a>
</h2>
<div class="section level3">
<h3 id="how-do-i-add-a-status-badge-to-my-project">How do I add a status badge to my project?<a class="anchor" aria-label="anchor" href="#how-do-i-add-a-status-badge-to-my-project"></a>
</h3>
<p>See GitHub’s docs on <a href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge" class="external-link">adding a badge</a>.</p>
<p>If your workflow file is named <code>check-app.yaml</code> in the <code>schloerke/example-app</code> repo, you can add a status badge to your GitHub to your README.md with the following line:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1"></a><span class="al">![check-app](https://github.com/schloerke/example-app/actions/workflows/check-app.yml/badge.svg)</span></span></code></pre></div>
<p>In your <code>README.md</code> file, you can add a build status badge, like the one below, so that you can see the status of your code at a glance:</p>
</div>
<div class="section level3">
<h3 id="how-do-i-use-a-description-file-instead-of-renv">How do I use a <code>DESCRIPTION</code> file instead of <code>{renv}</code>?<a class="anchor" aria-label="anchor" href="#how-do-i-use-a-description-file-instead-of-renv"></a>
</h3>
<p>Instead of using <a href="https://rstudio.github.io/renv/" class="external-link">renv</a>, you can use a <code>DESCRIPTION</code> file can be used to tell GHA which packages are needed to test the application. Instead of locking each package to a specific version like <a href="https://rstudio.github.io/renv/" class="external-link">renv</a>, this will result in the latest version of each package being downloaded from CRAN. This may be appropriate if you want to make sure your application works with the latest version of each package, instead of a frozen set of packages.</p>
<p>To use a <code>DESCRIPTION</code> file, you need to modify your <code>check-app.yaml</code> file to use <code>r-lib/actions</code> default package installation system instead of <a href="https://rstudio.github.io/renv/" class="external-link">renv</a>. Replace this line from the template provided above:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yml"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-renv@v2</span></span></code></pre></div>
<p>with</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r-dependencies@v2</span></span></code></pre></div>
<p>You will not want generate a <code>renv.lock</code>, <code>.Rprofile</code>, or other <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> files, so do not run the <a href="https://rstudio.github.io/renv/" class="external-link">renv</a> commands listed above.</p>
<p>Next, create a <code>DESCRIPTION</code> file that looks something like this:</p>
<pre><code>Imports:
  shiny,
  shinytest2</code></pre>
<p>The <code>Imports</code> field must list all R packages that your application directly uses.</p>
<p>Normally the latest versions of the listed packages will be installed from CRAN. However, if you need to install development versions of packages from GitHub, that can be done by adding a <code>Remotes</code> section. For example:</p>
<pre><code>Remotes:
  rstudio/shiny,
  rstudio/shinytest2@dev</code></pre>
<p>This tells GitHub to install the <a href="https://shiny.rstudio.com/" class="external-link">shiny</a> package from the <code>main</code> branch of <a href="https://github.com/rstudio/shiny" class="external-link uri">https://github.com/rstudio/shiny</a>, the <a href="https://github.com/rstudio/shinytest2" class="external-link">shinytest2</a> package from the <code>dev</code> branch of <a href="https://github.com/rstudio/shinytest2" class="external-link uri">https://github.com/rstudio/shinytest2</a>. In addition to branch names like <code>dev</code>, you can use commit hashes or tags.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, RStudio.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

  </div></footer>
</body>
</html>
